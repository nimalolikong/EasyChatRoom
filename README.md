# EasyChatRoom
一个简单的通过node.js、koa和socket.io 实现的多人和单人的聊天室

本项目是参加成电和蚂蚁前端合作在2021年秋天开设的一次为期两个周末前端课程中完成的大作业  
中间踩了很多坑，最后还是花了四天完成了大概的要求  
本项目可以分为五个部分  
1. 登录界面设计  
2. 聊天界面设计
3. 登录逻辑设计
4. 多聊逻辑设计
5. 单聊逻辑设计  
  
其中界面设计不多做赘述，可以按照自己喜欢的样式设计  
这里我大致沿用老师上课讲的设计思路，得到的界面如下  
#### 登录界面  
<img src="https://github.com/nimalolikong/EasyChatRoom/blob/main/images/登录界面.png" width="400px">  

#### 聊天界面  
<img src="https://github.com/nimalolikong/EasyChatRoom/blob/main/images/聊天界面.png" width="400px">  

接下来就是本项目的核心内容，*利用node.js、koa框架和socket.io框架搭建小全栈聊天室*  
登录逻辑实现和大部分socket.io的简易聊天室类似，通过客户端和服务端监听对应登录事件做出对应操作完成  
这里我是根据老师的思路，在登录成功后才进行客户端io实例的创建（在此之前置空）这样服务端就可对整个登录过程实现监控和认证管理
这里通过 *socket.handshake* 方法实现客户端和服务端登录交互，具体可见对应代码
对于登录状态可以分为三种
1. 登录成功  
2. 登录失败
   * 不存在该用户  
   * 密码错误
3. 连接失败  
对应逻辑实现可以查看对应部分代码，对应状态会弹出对应的alert窗口  
接着就是渲染朋友列表，这里默认第一个是群聊，同时对于每个用户朋友列表是不同的，登录状态也不相同  
所以渲染时也需要客户端和服务端实例特定监听事件实现对在线用户的存储和管理  
实现成功后就能得到渲染好的朋友列表该列表状态随登录用户数量的变化，登录用户的不同而变化


